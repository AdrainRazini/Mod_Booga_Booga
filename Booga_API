
--== Carregar MouseModule ==--
local success, MouseModule = pcall(function()
	return loadstring(game:HttpGet("https://raw.githubusercontent.com/AdrainRazini/mastermod/refs/heads/main/module/data.lua"))()
end)

if not success or not MouseModule then
	warn("‚ö† MouseModule n√£o foi carregado. Modo seguro ativado.")
	MouseModule = {}
	MouseModule.getMause = {
		GetPosition = function() return Vector2.new(0,0) end,
		IsLocked = function() return false end,
		LockMouse = function() end,
		UnlockMouse = function() end,
		Click = function() end,
		ClickUp = function() end,
		Scroll = function() end,
		Circle = function() end,
		Drag = function() end,
	}
end


-- ==========================================
-- Booga Booga IA
-- ==========================================

local Players = game:GetService("Players")
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local Workspace = game:GetService("Workspace")
local RunService = game:GetService("RunService")
local HttpService = game:GetService("HttpService")
local UserInputService = game:GetService("UserInputService")
local StarterGui = game:GetService("StarterGui")
local VirtualInputManager = game:GetService("VirtualInputManager")

local player = Players.LocalPlayer

local Regui
local PlayerGui = game.Players.LocalPlayer:WaitForChild("PlayerGui")
local GuiName = "Mod_Animal_Simulator_" .. game.Players.LocalPlayer.Name

-- 1Ô∏è‚É£ Tenta carregar localmente
local success, module = pcall(function()
	return require(script.Parent:FindFirstChild("Mod_UI"))
end)

if success and module then
	Regui = module
	print("[‚úÖ Mod Loader] Carregado localmente com sucesso!")
else
	-- 2Ô∏è‚É£ Tenta baixar remoto
	local ok, code
	local urls = {
		"https://raw.githubusercontent.com/AdrainRazini/mastermod/refs/heads/main/module/dataGui.lua",
		"https://animal-simulator-server.vercel.app/lua/DataGui.lua"
	}

	for _, url in ipairs(urls) do
		local okHttp, result = pcall(function()
			return game:HttpGet(url)
		end)
		if okHttp and result and result ~= "" then
			code = result
			print("[üåê Mod Loader] C√≥digo baixado de: " .. url)
			break
		else
			warn("[‚ö†Ô∏è Mod Loader] Falha ao baixar de:", url)
		end
	end

	-- 3Ô∏è‚É£ Executa o c√≥digo remoto se baixado
	if code then
		local okLoad, result = pcall(function()
			return loadstring(code)() 
		end)
		if okLoad and result then
			Regui = result
			print("[‚úÖ Mod Loader] M√≥dulo remoto carregado com sucesso!")
		else
			warn("[‚ùå Mod Loader] Erro ao executar c√≥digo remoto:", result)
		end
	else
		warn("[‚ùå Mod Loader] Nenhuma das fontes p√¥de ser carregada.")
	end
end

assert(Regui, "Regui n√£o foi carregado!")



if PlayerGui:FindFirstChild(GuiName) then
	Regui.Notifications(PlayerGui, {Title="Alert", Text="Neutralized Code", Icon="fa_rr_information", Tempo=10})
	return
end

-- teste de Api Das Tags
-- üîπ Fun√ß√£o para buscar jogador na API com fallback e tratamento de erro

local RESULT = {
	ERRO = "Erro",
	INEXISTENTE = "Inexistente",
	DESCONHECIDO = "Desconhecido"
}

-- üîπ Fun√ß√£o para buscar jogador na API
local function getplayer(id)
	local url = "https://animal-simulator-server.vercel.app/api/player/" .. tostring(id)
	local response

	-- 1Ô∏è‚É£ Tenta HttpService:GetAsync
	local ok1, res1 = pcall(function()
		return HttpService:GetAsync(url)
	end)
	if ok1 then
		response = res1
	end

	-- 2Ô∏è‚É£ Fallback
	if not response then
		local ok2, res2 = pcall(function()
			return game:HttpGet(url)
		end)
		if ok2 then
			response = res2
		else
			return RESULT.ERRO
		end
	end

	-- 3Ô∏è‚É£ Decodificar JSON
	local okJson, data = pcall(function()
		return HttpService:JSONDecode(response)
	end)
	if not okJson then
		return RESULT.ERRO
	end

	-- 4Ô∏è‚É£ **TRATAMENTO ESPECIAL PARA SUA API**
	-- ‚úî Sucesso = true ‚Üí tag real
	if data.success == true then
		return data.Tag or RESULT.DESCONHECIDO
	end

	-- ‚úî Sucesso = false ‚Üí ver detalhes
	if data.message == "Jogador n√£o encontrado" 
		or data.message == "Jogador n√£o encontrado (cache criado)" then
		return RESULT.INEXISTENTE
	end

	-- ‚úî "Erro interno" ‚Üí trate como DESCONHECIDO (n√£o erro)
	if data.message == "Erro interno, mas resposta segura enviada" then
		return RESULT.DESCONHECIDO
	end

	-- Qualquer outra falha
	return RESULT.DESCONHECIDO
end


-- üß© Uso
local tag = getplayer(player.UserId)

local titleText = ({
	Livre = "‚úÖ Alert: Livre",
	Banido = "üö´ Alert: Banido",
	Erro = "‚ö†Ô∏è Alert: Erro ao consultar API",
	Inexistente = "‚úÖ Alert: ADN_MOD",
})[tag] or ("‚ÑπÔ∏è Alert: Tag desconhecida (" .. tostring(tag) .. ")")

-- üîî Notifica√ß√£o segura
if PlayerGui and Regui and Regui.Notifications then
	pcall(function()
		Regui.Notifications(PlayerGui, {
			Title = titleText,
			Text = "Status da conta: " .. tostring(tag),
			Icon = "fa_rr_information",
			Tempo = 10
		})
	end)
end

-- üß© Log + controle de fluxo
if tag == "Banido" then
	print("üö´ Jogador banido ‚Äî execu√ß√£o interrompida.")
	return -- ‚ùå interrompe aqui
else


	-- Continua normalmente para qualquer outro caso
	print("Status da conta:", tag)


end


-- FLAGS
local AUTO = {AllowMouseControl = false,  lock_mouse = false, auto_clicking = false, clickTask = nil, Type = "Left",Coordinates = false}
local Sliders = {maxRange = 0, Duration = 0}

local AF = {}
local AF_Timer = {}

local PVP = {}
local PVP_Timer = {}

local G2L = {}


--==============================
-- FUN√á√ïES
--==============================
local function MoveMouseTo(targetPos, steps, delay)
	if not  AUTO.AllowMouseControl or not MouseModule then return end
	steps = steps or 20
	delay = delay or 0.01

	local startPos = MouseModule.getMause.GetPosition()
	local deltaX = (targetPos.X - startPos.X) / steps
	local deltaY = (targetPos.Y - startPos.Y) / steps

	for i = 1, steps do
		local newPos = Vector2.new(startPos.X + deltaX * i, startPos.Y + deltaY * i)
		if MouseModule.getMause.IsLocked() then
			MouseModule.getMause.LockMouse(newPos)
		else
			VirtualInputManager:SendMouseMoveEvent(newPos.X, newPos.Y, nil)
		end
		task.wait(delay)
	end
end

local function SafeClickUp(rightClick, duration)
	if not  AUTO.AllowMouseControl or not MouseModule then return end
	rightClick = rightClick or MouseModule.getMause.IsRightClick()
	duration = duration or 0.05
	MouseModule.getMause.ClickUp(rightClick, duration)
end


local function SafeClickUpAuto(rightClick, duration, valueFunc)
	if not  AUTO.auto_clicking or not MouseModule then return end
	rightClick = AUTO.Type == "Right"
	duration = duration or 0.05
	--SafeClickUp(false, 0.5) --esquerda
	--SafeClickUp(true, 0.5) --direita
	task.spawn(function()
		while  AUTO.auto_clicking 
			and typeof(valueFunc) == "function" 
			and valueFunc() do

			if MouseModule.getMause.ClickUp then
				MouseModule.getMause.ClickUp(rightClick, duration)
			end
			task.wait(duration)
		end
	end)
end


-- Fun√ß√£o para pegar o centro real de qualquer bot√£o/frame
local function getButtonCenter(button)
	-- Posi√ß√£o do canto superior esquerdo
	local absPos = button.AbsolutePosition
	local absSize = button.AbsoluteSize
	local anchor = button.AnchorPoint or Vector2.new(0,0)

	-- F√≥rmula universal (compensa automaticamente o AnchorPoint)
	return absPos + (absSize * anchor)
end

--===================--
-- Window Guis Tabs --
-- ‚¨á ‚¨á ‚¨á ‚¨á ‚¨á ‚¨á ‚¨á ‚¨á
--===================--
-- GUI
Window = Regui.TabsWindow({Title=GuiName, Text="Booga Booga", Size=UDim2.new(0, 350, 0, 250), Icon_btn = true})

-- Refer√™ncia
G2L["Pointer"] = Instance.new("Frame")
G2L["Pointer"].Parent = Window.Frame.Parent
G2L["Pointer"].Size = UDim2.fromOffset(2, 2) -- tamanho da bolinha
G2L["Pointer"].Position = UDim2.fromScale(0.5, 0.5)
G2L["Pointer"].AnchorPoint = Vector2.new(0.5, 0.5)
G2L["Pointer"].BackgroundColor3 = Color3.fromRGB(255, 255, 255)
G2L["Pointer"].BorderSizePixel = 0
G2L["Pointer"].ZIndex = 999

-- Refer√™ncia
G2L["Referencia"] = Instance.new("Frame")
G2L["Referencia"].Parent = Players.LocalPlayer:WaitForChild("PlayerGui")
G2L["Referencia"].Size = UDim2.fromOffset(2, 2) -- tamanho da bolinha
G2L["Referencia"].Position = UDim2.fromScale(0.5, 0.5)
G2L["Referencia"].AnchorPoint = Vector2.new(0.5, 0.5)
G2L["Referencia"].BackgroundColor3 = Color3.fromRGB(255, 255, 255)
G2L["Referencia"].BorderSizePixel = 0
G2L["Referencia"].ZIndex = 999

local corner = Instance.new("UICorner")
corner.CornerRadius = UDim.new(1, 0)
corner.Parent = G2L["Referencia"]

FarmTab = Regui.CreateTab(Window,{Name="Farm"})

local function notify(title, text)
	Regui.NotificationPerson(Window.Frame.Parent, {
		Title = title,
		Text = text,
		Icon = "fa_envelope",
		Tempo = 5,
		Casch = {},
		Sound = ""
	}, function()
		print("Notifica√ß√£o fechada!")
	end)
end



-- SliderOption para escolher o tamanho da janela
local Slider_Click= Regui.CreateSliderOption(FarmTab, {
	Text = "Type Click",
	Color = "White",
	Background = "Blue",
	Value = 1, -- valor inicial
	Table = {"Left","Right"} -- op√ß√µes
}, function(state)
	AUTO.Type = state -- atualiza a vari√°vel
end)


Locked = Regui.CreateToggleboxe(FarmTab, {
	Text = "Lock Mouse",
	Color = "Yellow"
}, function(state)
	AUTO.lock_mouse = state

	notify(
		"Mouse Lock",
		"Lock mouse: " .. tostring(state)
	)

	if state then
		local refPos = getButtonCenter(G2L["Referencia"])
		local mause = MouseModule.getMause
		-- trava mouse
		mause.LockMouse(refPos)
	else
		-- libera mouse
		mause.UnlockMouse()
	end
end)

SliderInt_Duration = Regui.CreateSliderInt(FarmTab, {
	Text = "Max Duration", 
	Color = "Blue", 
	Value = 0.05, Minimum = 0, Maximum = 60
}, function(state)
	Sliders.Duration = state
	print("atualizado:", Sliders.maxRange)
end)

Clicked = Regui.CreateToggleboxe(FarmTab, {
	Text = "Auto Clicking",
	Color = "Yellow"
}, function(state)
	AUTO.auto_clicking = state

	notify(
		"Auto Click",
		"Auto clicking: " .. tostring(state)
	)

	if state then
		-- start loop de click
		SafeClickUpAuto(false, Sliders.Duration, function() return state end)
	else
		-- stop loop
	end
end)


Atived = Regui.CreateToggleboxe(FarmTab, {
	Text = "AllowMouseControl",
	Color = "Yellow"
}, function(state)
	AUTO.AllowMouseControl = state

	notify(
		"Mouse Control",
		"AllowMouseControl: " .. tostring(state)
	)

	if state then
		-- ativa controle do mouse
	else
		-- desativa controle do mouse
	end
end)

Scroll_ = Regui.CreateToggleboxe(FarmTab, {
	Text = "Sroll",
	Color = "Yellow"
}, function(state)
	AUTO.auto_clicking = state

	notify(
		"Auto Sroll",
		"Auto Sroll: " .. tostring(state)
	)

	if state then
		MouseModule.getMause.Scroll(3)
	else
		-- stop loop
	end
end)

Circle = Regui.CreateToggleboxe(FarmTab, {
	Text = "Circle",
	Color = "Yellow"
}, function(state)
	AUTO.auto_clicking = state

	notify(
		"Auto Circle",
		"Auto Circle: " .. tostring(state)
	)

	if state then
		MouseModule.getMause.Circle(50,36,0.01)
	else
		-- stop loop
	end
end)

Drag = Regui.CreateToggleboxe(FarmTab, {
	Text = "Drag",
	Color = "Yellow"
}, function(state)
	AUTO.auto_clicking = state

	notify(
		"Auto Drag",
		"Auto Drag: " .. tostring(state)
	)

	if state then
		local startPos = Vector2.new(100,100)
		local endPos = Vector2.new(400,300)
		MouseModule.getMause.Drag(startPos,endPos,50,0.01)
	else
		-- stop loop
	end
end)

-- RANGE GLOBAL
SliderInt_Range = Regui.CreateSliderInt(FarmTab, {
	Text = "Max Range", 
	Color = "Blue", 
	Value = 50, Minimum = 1, Maximum = 500
}, function(state)
	Sliders.maxRange = state
	print("Range atualizado:", Sliders.maxRange)
end)


local Info_Poss = false

-- Frame base
G2L["LabelPoss"] = Instance.new("Frame")
G2L["LabelPoss"].Parent = Window.Frame.Parent
G2L["LabelPoss"].Size = UDim2.new(0, 200, 0, 30)
G2L["LabelPoss"].Position = UDim2.new(0.5, -100, 0, 10)
G2L["LabelPoss"].BackgroundTransparency = 0.2
G2L["LabelPoss"].Visible = false

-- Label
local TextLabel = Instance.new("TextLabel")
TextLabel.Parent = G2L["LabelPoss"]
TextLabel.Size = UDim2.new(1, 0, 1, 0)
TextLabel.BackgroundTransparency = 1
TextLabel.TextColor3 = Color3.fromRGB(255, 255, 0)
TextLabel.TextScaled = true
TextLabel.Text = "X: 0 | Y: 0 | Z: 0"

-- Fun√ß√£o de update
function UpdatePoss(text)
	TextLabel.Text = text
end

-- Atualiza√ß√£o cont√≠nua
RunService.RenderStepped:Connect(function()
	if not Info_Poss then return end

	local char = player.Character
	local hrp = char and char:FindFirstChild("HumanoidRootPart")
	if not hrp then return end

	local pos = hrp.Position
	UpdatePoss(string.format(
		"X: %.1f | Y: %.1f | Z: %.1f",
		pos.X, pos.Y, pos.Z
		))
end)

-- Toggle
Coordinates = Regui.CreateToggleboxe(FarmTab, {
	Text = "Coordinates",
	Color = "Yellow"
}, function(state)
	AUTO.Coordinates = state
	Info_Poss = state
	G2L["LabelPoss"].Visible = state

	notify(
		"Auto Drag",
		"Coordinates: " .. tostring(state)
	)
end)



--[[
local success, Type_Folders = pcall(function()
	return loadstring(game:HttpGet(""))()
end)
]]